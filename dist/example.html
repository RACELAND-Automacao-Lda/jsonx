<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>RJX TEST</title>
    <script type="text/javascript" src="rjx.umd.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/javascript">
      let c = rjx._rjxComponents.getFunctionFromEval({body:'console.log("hello")'});
      const MyCustomComponent = rjx._rjxComponents.getReactComponent({
        //
        // Initialization function
        //
        getInitialState:{
          body:'return { status:"not-loaded", name:"rjx test", customNumber:1, }',
          arguments:[],
        },
        getDefaultProps:{
          body:'return { someProp:1, someOtherProp:2, status:"original status" }',
          arguments:[],
        },
        componentDidMount:{
          body:`console.log('mounted', 'this.props',this.props, 'this.state',this.state)`,
          arguments:[],
        },
        componentWillUnmount:{
          body:`console.log('unmounted',this.props)`,
          arguments:[],
        },
        //
        // State change functions
        //
        shouldComponentUpdate:{
          body:'console.log("should update component",{nextProps,nextState}); return true;',
          arguments:['nextProps', 'nextState']
        },
        componentWillUpdate:{
          body:'console.log("will update component",{nextProps,nextState}); return true;',
          arguments:['nextProps', 'nextState']
        },
        componentDidUpdate:{
          body:'console.log("did update component",{prevProps,prevState}); return true;',
          arguments:['prevProps', 'prevState']
        },
        //
        // Prop change functions
        //
        componentWillReceiveProps: {
          body:'console.log("will recieve props",{nextProps}); return true;',
          arguments:['nextProps']
        },
        //
        // RENDER IS THE ONLY ***REQUIRED*** FUNCTION
        //
        render:{
          body:{
            component:'p',
            props:{
              status:'from inline prop'
            },
            passprops:true,
            children:[
              {
                component:'span',
                children: 'My Custom React Component Status: ',
              },
              {
                component:'span',
                thisprops:{
                  children:['status']
                }
              }
            ]
          },
        }
      })
      const MyCustomFunctionComponent = rjx._rjxComponents.getReactFunction({
        component:'div',
        props:{
          extra:'ok'
        },
        passprops:true,
        children:[
          {
            component:'p',
            children: 'This is from Function Component'
          },
          
          {
              component:'p',
              passprops:true,
              children:[
                {
                  component:'span',
                  children:'You clicked ',
                },
                {
                  component:'input',
                  thisprops:{
                    value:['count'],
                  },
                  __functionProps:{
                    ref:'func:inline.ref',
                  },
                  __inline:{
                    ref:`window.INPUTREF = param1; console.log('testing INPUTREF',{param1});`,
                  },
                },
                {
                  component:'span',
                  children:' times'
                }
              ]
          },
          {
            component:'button',
            // props:{
            //   onClick:()=>{console.log('CLICKED THIS')}
            // },
            __functionProps:{
              onClick:'func:inline.onClick'
              // onclick:'func:this.props.onClick'
            },
            __functionargs:['count','setCount'],
            __inline:{
              onClick:`return setCount(count+1)//console.log('this is inline',{count,setCount}); `,
            },
            children:'Click me'
          }
        ],
      },`
      const [count, setCount] = useState(0);
      const functionprops = {count,setCount};
      // console.log({ reactComponent, })
      // console.log('HELLO',{resources, props,},arguments)
      `,{
        name:'IntroHook'
      })
      console.log({MyCustomFunctionComponent});
      const sampleRJX = {
        component: 'div',
        props: {
          id: 'generatedRJX',
          className:'rjx',
          otherProp: 'testing Other Prop'
        },
        children: [
          {
            component: 'h1',
            props: {
              style: {
                color: 'darkgrey',
                fontWeight:'bold',
                cursor:'pointer',
              },
            },
            __dangerouslyEvalProps:{
              onClick:'()=>alert("click works")'
            },
            children:'Hello RJX World!',
          },
          {
            component:'p',
            children:[
              {
                component:'span',
                children:'Browser URL: '
              },
              {
                component:'span',
                
                windowprops:{
                  _children:['location','href']
                },
              }
            ]
          },
          {
            component:'MyCustomComponent',
            props:{
              status:'Amazing',
            }
          },
          {
            component:'MyCustomFunctionComponent',
            props:{
              status:'Amazing',
            },
            resourceprops:{
              punc:['punc']
            }
          },
          {
            p:{
              props:{
                style:{
                  color:'blue'
                },
                testProps:' syntax '
              },
              passprops:true,
              children:[
                {
                  span:{children:'this is using shorthand rjx'}
                },
                {
                  span:{
                    thisprops:{
                      _children:['testProps']
                    }
                  }
                },
                {
                  span:{
                    resourceprops:{
                      _children:['punc']
                    }
                  }
                },
              ],
            }
          }
        ],
      };
      const boundConfig = {
        debug:true, 
        reactComponents:{
          MyCustomComponent,
          MyCustomFunctionComponent,
        }
      };
      rjx.rjxRender.call(boundConfig,{ 
        rjx: sampleRJX, 
        resources: { 
          addedStatus:'LIVE',
          punc:'   !!!!'
        },
        querySelector:'#root', });
    </script>
  </body>
</html>