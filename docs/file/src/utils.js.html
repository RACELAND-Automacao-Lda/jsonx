<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/utils.js | JSONX</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="//www.googletagmanager.com/gtag/js?id=UA-112697260-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-112697260-2');
  </script><meta name="description" content="Reactive JSON (JSONX) takes a JSONX JSON object and renders React components. JSONX lets you get up and running with React without using JavaScript."><meta property="og:type" content="website"><meta property="og:url" content="https://repetere.github.io/jsonx"><meta property="og:site_name" content="JSONX"><meta property="og:title" content="JSONX"><meta property="og:image" content="https://jsonx.io/favicon.png"><meta property="og:description" content="Reactive JSON (JSONX) takes a JSONX JSON object and renders React components. JSONX lets you get up and running with React without using JavaScript."><meta property="og:author" content="https://github.com/repetere"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="JSONX"><meta property="twitter:description" content="Reactive JSON (JSONX) takes a JSONX JSON object and renders React components. JSONX lets you get up and running with React without using JavaScript."><meta property="twitter:image" content="https://jsonx.io/favicon.png"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/repetere/jsonx"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getChildrenProperty">getChildrenProperty</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getChildrenProps">getChildrenProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getJSONXChildren">getJSONXChildren</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getBoundedComponents">getBoundedComponents</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getComponentFromLibrary">getComponentFromLibrary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getComponentFromMap">getComponentFromMap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getFunctionFromEval">getFunctionFromEval</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getReactClassComponent">getReactClassComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getReactContext">getReactContext</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getReactFunctionComponent">getReactFunctionComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-__express">__express</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-__getReact">__getReact</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-__getReactDOM">__getReactDOM</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-__getUseGlobalHook">__getUseGlobalHook</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-compile">compile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getReactElementFromJSON">getReactElementFromJSON</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getReactElementFromJSONX">getReactElementFromJSONX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-jsonToJSX">jsonToJSX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-jsonxRender">jsonxRender</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-outputHTML">outputHTML</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-outputJSON">outputJSON</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-outputJSX">outputJSX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-boundArgsReducer">boundArgsReducer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getChildrenComponents">getChildrenComponents</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getComponentProps">getComponentProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getComputedProps">getComputedProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEvalProps">getEvalProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getFunctionFromProps">getFunctionFromProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getFunctionProps">getFunctionProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getJSONXProps">getJSONXProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getParamNames">getParamNames</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getReactComponentProps">getReactComponentProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getWindowComponents">getWindowComponents</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-displayComponent">displayComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getAdvancedBinding">getAdvancedBinding</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSimplifiedJSONX">getSimplifiedJSONX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-simpleJSONXSyntax">simpleJSONXSyntax</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-traverse">traverse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-validSimpleJSONXSyntax">validSimpleJSONXSyntax</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-validateJSONX">validateJSONX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-advancedBinding">advancedBinding</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-componentMap">componentMap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-_jsonxChildren">_jsonxChildren</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-_jsonxComponents">_jsonxComponents</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-_jsonxProps">_jsonxProps</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-_jsonxUtils">_jsonxUtils</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getReactElement">getReactElement</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getRenderedJSON">getRenderedJSON</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-jsonxHTMLString">jsonxHTMLString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-renderIndex">renderIndex</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ARGUMENT_NAMES">ARGUMENT_NAMES</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-STRIP_COMMENTS">STRIP_COMMENTS</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/utils.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import UAParser from &apos;ua-parser-js&apos;;


/**
 * Used to evaluate whether or not to render a component
 * @param {Object} options 
 * @param {Object} options.jsonx - Valid JSONX JSON 
 * @param {Object} options.props - Props to test comparison values against, usually Object.assign(jsonx.props,jsonx.asyncprops,jsonx.thisprops,jsonx.windowprops) 
 * @returns {Boolean} returns true if all comparisons are true or if using or comparisons, at least one condition is true
 * @example
 const sampleJSONX = {
  component: &apos;div&apos;,
  props: {
    id: &apos;generatedJSONX&apos;,
    className: &apos;jsonx&apos;,
    bigNum: 1430931039,
    smallNum: 0.425,
    falsey: false,
    truthy: true,
  },
  children: &apos;some div&apos;,
};
const testJSONX = Object.assign({}, sampleJSONX, {
  comparisonprops: [{
    left: [&apos;truthy&apos;,],
    operation:&apos;==&apos;,
    right:[&apos;falsey&apos;,],
  }],
});
displayComponent({ jsonx: testJSONX, props: testJSONX2.props, }) // =&gt; false
 */
export function displayComponent(options = {}) {
  const { jsonx = {}, props, } = options;
  const propsToCompare = jsonx.comparisonprops;
  const comparisons = Array.isArray(propsToCompare) ? propsToCompare.map(comp =&gt; {
    const compares = {};
    if (Array.isArray(comp.left)) {
      compares.left = comp.left;
    }
    if (Array.isArray(comp.right)) {
      compares.right = comp.right;
    }
    const propcompares = traverse(compares, props||jsonx.props);
    const opscompares = Object.assign({}, comp, propcompares);
    // console.debug({ opscompares, compares, renderedCompProps });
    switch (opscompares.operation) {
    case &apos;eq&apos;:
    case &apos;==&apos;:
      // return opscompares.left == opscompares.right;
      // eslint-disable-next-line
      return opscompares.left == opscompares.right;
    case &apos;dneq&apos;:
    case &apos;!=&apos;:
    case &apos;!&apos;:
      // return opscompares.left != opscompares.right;
      return opscompares.left !== opscompares.right;
    case &apos;dnseq&apos;:
    case &apos;!==&apos;:
      return opscompares.left !== opscompares.right;
    case &apos;seq&apos;:
    case &apos;===&apos;:
      return opscompares.left === opscompares.right;
    case &apos;lt&apos;:
    case &apos;&lt;&apos;:
      return opscompares.left &lt; opscompares.right;
    case &apos;lte&apos;:
    case &apos;&lt;=&apos;:
      return opscompares.left &lt;= opscompares.right;
    case &apos;gt&apos;:
    case &apos;&gt;&apos;:
      return opscompares.left &gt; opscompares.right;
    case &apos;gte&apos;:
    case &apos;&gt;=&apos;:
      return opscompares.left &gt;= opscompares.right;
    case &apos;dne&apos;:
    case &apos;undefined&apos;:
    case &apos;null&apos;:
      return opscompares.left === undefined || opscompares.left === null; 
    case &apos;!null&apos;:
    case &apos;!undefined&apos;:
    case &apos;exists&apos;:
    default://&apos;exists&apos;
      return opscompares.left !== undefined &amp;&amp; opscompares.left !== null;
    }
    // }
    // if (opscompares.operation === &apos;eq&apos;) {
    //   // return opscompares.left == opscompares.right;
    //   // eslint-disable-next-line
    //   return opscompares.left == opscompares.right;
    // } else if (opscompares.operation === &apos;dneq&apos;) {
    //   // return opscompares.left != opscompares.right;
    //   return opscompares.left !== opscompares.right;
    // } else if (opscompares.operation === &apos;dnseq&apos;) {
    //   return opscompares.left !== opscompares.right;
    // } else if (opscompares.operation === &apos;seq&apos;) {
    //   return opscompares.left === opscompares.right;
    // } else if (opscompares.operation === &apos;lt&apos;) {
    //   return opscompares.left &lt; opscompares.right;
    // } else if (opscompares.operation === &apos;lte&apos;) {
    //   return opscompares.left &lt;= opscompares.right;
    // } else if (opscompares.operation === &apos;gt&apos;) {
    //   return opscompares.left &gt; opscompares.right;
    // } else if (opscompares.operation === &apos;gte&apos;) {
    //   return opscompares.left &gt;= opscompares.right;
    // } else if (opscompares.operation === &apos;dne&apos;) {
    //   return opscompares.left === undefined || opscompares.left === null;
    // } else { //&apos;exists&apos;
    //   return opscompares.left !== undefined &amp;&amp; opscompares.left !== null;
    // }
  }) : [];
  const validProps = comparisons.filter(comp =&gt; comp === true);
  if (!jsonx.comparisonprops) {
    return true;
  } else if (jsonx.comparisonorprops &amp;&amp; validProps.length &lt; 1) {
    return false;
  } else if (validProps.length !== comparisons.length &amp;&amp; !jsonx.comparisonorprops) {
    return false;
  } else {
    return true;
  }
}

/**
 * Use to test if can bind components this context for react-redux-router 
 * @returns {Boolean} true if browser is not IE or old android / chrome
 */
export function getAdvancedBinding() {
  
  if (typeof window === &apos;undefined&apos;) {
    var window = (this &amp;&amp; this.window)
      ? this.window
      : global.window || {};
    if (!window.navigator) return false;
  }
  try {
    if (window &amp;&amp; window.navigator &amp;&amp; window.navigator.userAgent &amp;&amp; typeof window.navigator.userAgent === &apos;string&apos;) {
      // console.log(&apos;window.navigator.userAgent&apos;,window.navigator.userAgent)
      if(window.navigator.userAgent.indexOf(&apos;Trident&apos;) !== -1) {
        return false;
      }
      const uastring = window.navigator.userAgent;
      const parser = new UAParser();
      parser.setUA(uastring);
      const parseUserAgent = parser.getResult();
      // console.log({ parseUserAgent, });
      if ((parseUserAgent.browser.name === &apos;Chrome&apos; || parseUserAgent.browser.name === &apos;Chrome WebView&apos; ) &amp;&amp; parseUserAgent.os.name === &apos;Android&apos; &amp;&amp; parseInt(parseUserAgent.browser.version, 10) &lt; 50) {
        return false;
      }
      if (parseUserAgent.browser.name === &apos;Android Browser&apos;) {
        return false;
      }
    }
  } catch (e) {
    e;
    console.error(e);
    // console.warn(&apos;could not detect browser support&apos;, e);
    return false;
  }
  return true;
}

/**
 * take an object of array paths to traverse and resolve
 * @example
 * const testObj = {
      user: {
        name: &apos;jsonx&apos;,
        description: &apos;react withouth javascript&apos;,
      },
      stats: {
        logins: 102,
        comments: 3,
      },
      authentication: &apos;OAuth2&apos;,
    };
const testVals = { auth: [&apos;authentication&apos;, ], username: [&apos;user&apos;, &apos;name&apos;, ], };

 traverse(testVals, testObj) // =&gt;{ auth:&apos;OAuth2&apos;, username:&apos;jsonx&apos;,  }
 * @param {Object} paths - an object to resolve array property paths 
 * @param {Object} data - object to traverse
 * @returns {Object} resolved object with traversed properties
 * @throws {TypeError} 
 */
export function traverse(paths = {}, data = {}) {
  let keys = Object.keys(paths);
  if (!keys.length) return paths;
  return keys.reduce((result, key) =&gt; {
    if (typeof paths[key] === &apos;string&apos;) result[key] = data[paths[key]];
    else if (Array.isArray(paths[key])) {
      let _path = Object.assign([], paths[key]);
      let value = data;
      while (_path.length &amp;&amp; value &amp;&amp; typeof value === &apos;object&apos;) {
        let prop = _path.shift();
        value = value[prop];
      }
      result[key] = (_path.length) ? undefined : value;
    } else throw new TypeError(&apos;dynamic property paths must be a string or an array of strings or numeric indexes&apos;);
    return result;
  }, {});
}

/**
 * Validates JSONX JSON Syntax
 * @example
 * validateJSONX({component:&apos;p&apos;,children:&apos;hello world&apos;})=&gt;true
 * validateJSONX({children:&apos;hello world&apos;})=&gt;throw SyntaxError(&apos;[0001] Missing React Component&apos;)
 * @param {Object} jsonx - JSONX JSON to validate 
 * @param {Boolean} [returnAllErrors=false] - flag to either throw error or to return all errors in an array of errors
 * @returns {Boolean|Error[]} either returns true if JSONX is valid, or throws validation error or returns list of errors in array
 * @throws {SyntaxError|TypeError|ReferenceError}
 */
export function validateJSONX(jsonx = {}, returnAllErrors = false) {
  const dynamicPropsNames = [&apos;asyncprops&apos;, &apos;resourceprops&apos;, &apos;windowprops&apos;, &apos;thisprops&apos;, &apos;thisstate&apos;,];
  const evalPropNames = [&apos;__dangerouslyEvalProps&apos;, &apos;__dangerouslyBindEvalProps&apos;,];
  const validKeys = [&apos;component&apos;, &apos;props&apos;, &apos;children&apos;, &apos;__spreadComponent&apos;, &apos;__inline&apos;,&apos;__functionargs&apos;, &apos;__dangerouslyInsertComponents&apos;, &apos;__dangerouslyInsertComponentProps&apos;, &apos;__dangerouslyInsertJSONXComponents&apos;, &apos;__functionProps&apos;, &apos;__functionparams&apos;, &apos;__windowComponents&apos;, &apos;__windowComponentProps&apos;, &apos;comparisonprops&apos;, &apos;comparisonorprops&apos;, &apos;passprops&apos;, &apos;debug&apos; ].concat(dynamicPropsNames, evalPropNames);
  let errors = [];
  if (!jsonx.component) {
    errors.push(SyntaxError(&apos;[0001] Missing React Component&apos;));
  }
  if (jsonx.props) {
    if (typeof jsonx.props !== &apos;object&apos; || Array.isArray(jsonx.props)) {
      errors.push(TypeError(&apos;[0002] &apos;+jsonx.component+&apos;: props must be an Object / valid React props&apos;));
    }
    if (jsonx.props.children &amp;&amp; (typeof jsonx.props.children !== &apos;string&apos; || !Array.isArray(jsonx.props.children))) {
      errors.push(TypeError(&apos;[0003] &apos;+jsonx.component+&apos;: props.children must be an array of JSONX JSON objects or a string&apos;));
    }
    if (jsonx.props._children &amp;&amp; (typeof jsonx.props._children !== &apos;string&apos; || !Array.isArray(jsonx.props._children))) {
      errors.push(TypeError(&apos;[0004] &apos;+jsonx.component+&apos;: props._children must be an array of JSONX JSON objects or a string&apos;));
    }
  }
  if (jsonx.children) {
    if (typeof jsonx.children !== &apos;string&apos; &amp;&amp; !Array.isArray(jsonx.children)) {
      errors.push(TypeError(&apos;[0005] &apos;+jsonx.component+&apos;: children must be an array of JSONX JSON objects or a string&apos;));
    }
    if (Array.isArray(jsonx.children)) {
      const childrenErrors = jsonx.children
        .filter(c =&gt; typeof c === &apos;object&apos;)
        .map(c =&gt; validateJSONX(c, returnAllErrors));
      errors = errors.concat(...childrenErrors);
    }
  }
  dynamicPropsNames.forEach(dynamicprop =&gt; {
    const jsonxDynamicProps = jsonx[ dynamicprop ];
    if (jsonxDynamicProps) {
      // if (dynamicprop === &apos;thisprops&apos;) {
      //   console.log({ dynamicprop, jsonxDynamicProps });
      // }
      if (typeof jsonxDynamicProps !== &apos;object&apos;) {
        errors.push(TypeError(`[0006] ${dynamicprop} must be an object`));
      }
      Object.keys(jsonxDynamicProps).forEach(resolvedDynamicProp =&gt; {
        if (!Array.isArray(jsonxDynamicProps[ resolvedDynamicProp ])) {
          errors.push(TypeError(`[0007] jsonx.${dynamicprop}.${resolvedDynamicProp} must be an array of strings`));
        }
        if (Array.isArray(jsonxDynamicProps[resolvedDynamicProp])) {
          const allStringArray = jsonxDynamicProps[resolvedDynamicProp].filter(propArrayItem =&gt; typeof propArrayItem === &apos;string&apos;);
          
          if (allStringArray.length !== jsonxDynamicProps[ resolvedDynamicProp ].length) {
            errors.push(TypeError(`[0008] jsonx.${dynamicprop}.${resolvedDynamicProp} must be an array of strings`));
          }
        }
      });
    }
  });
  const evalProps = jsonx.__dangerouslyEvalProps;
  const boundEvalProps = jsonx.__dangerouslyBindEvalProps;
  if (evalProps || boundEvalProps) {
    if ((evalProps &amp;&amp; typeof evalProps !== &apos;object&apos;) || (boundEvalProps &amp;&amp; typeof boundEvalProps !== &apos;object&apos;)) {
      errors.push(TypeError(&apos;[0009] __dangerouslyEvalProps must be an object of strings to convert to valid javascript&apos;));
    }
    evalPropNames
      .filter(evalProp =&gt; jsonx[ evalProp ])
      .forEach(eProps =&gt; {
        const evProp = jsonx[ eProps ];
        const scopedEval = eval; 
        Object.keys(evProp).forEach(propToEval =&gt; {
          if (typeof evProp[ propToEval ] !== &apos;string&apos;) {
            errors.push(TypeError(`[0010] jsonx.${eProps}.${evProp} must be a string`));
          }
          try {
            // console.log({ eProps });
            if (eProps === &apos;__dangerouslyBindEvalProps&apos;) {
              const funcToBind = scopedEval(`(${evProp[ propToEval ]})`);
              funcToBind.call({ bounded: true, });
            } else {
              scopedEval(evProp[ propToEval ]);
            }
          } catch (e) {
            errors.push(e);
          }
        });
      });
  }
  if (jsonx.__dangerouslyInsertComponents) {
    Object.keys(jsonx.__dangerouslyInsertComponents).forEach(insertedComponents =&gt; {
      try {
        validateJSONX(jsonx.__dangerouslyInsertComponents[ insertedComponents ]);
      } catch (e) {
        errors.push(TypeError(`[0011] jsonx.__dangerouslyInsertComponents.${insertedComponents} must be a valid JSONX JSON Object: ${e.toString()}`));
      }
    });
  }
  if (jsonx.__functionProps) {
    if (typeof jsonx.__functionProps !== &apos;object&apos;) {
      errors.push(TypeError(&apos;[0012] jsonx.__functionProps  must be an object&apos;));
    } else {
      
      Object.keys(jsonx.__functionProps)
        .forEach(fProp =&gt; {
          if (jsonx.__functionProps[fProp] &amp;&amp;( typeof jsonx.__functionProps[fProp] !==&apos;string&apos; || jsonx.__functionProps[fProp].indexOf(&apos;func:&apos;) === -1)) {
            errors.push(ReferenceError(`[0013] jsonx.__functionProps.${fProp} must reference a function (i.e. func:this.props.logoutUser())`));
          }
        });
    }
  }
  if (jsonx.__windowComponentProps &amp;&amp; (typeof jsonx.__windowComponentProps !==&apos;object&apos; || Array.isArray(jsonx.__windowComponentProps))) {
    errors.push(TypeError(&apos;[0013] jsonx.__windowComponentProps  must be an object&apos;));
  }
  if (jsonx.__windowComponents) {
    if (typeof jsonx.__windowComponents !== &apos;object&apos;) {
      errors.push(TypeError(&apos;[0014] jsonx.__windowComponents must be an object&apos;));
    }
    Object.keys(jsonx.__windowComponents)
      .forEach(cProp =&gt; {
        if (typeof jsonx.__windowComponents[cProp]!==&apos;string&apos;||jsonx.__windowComponents[cProp].indexOf(&apos;func:&apos;) === -1) {
          errors.push(ReferenceError(`[0015] jsonx.__windowComponents.${cProp} must reference a window element on window.__jsonx_custom_elements (i.e. func:window.__jsonx_custom_elements.bootstrapModal)`));
        }
      });
  }
  if (typeof jsonx.comparisonorprops !== &apos;undefined&apos; &amp;&amp; typeof jsonx.comparisonorprops !== &apos;boolean&apos;) {
    errors.push(TypeError(&apos;[0016] jsonx.comparisonorprops  must be boolean&apos;));
  }
  if (jsonx.comparisonprops) {
    if(!Array.isArray(jsonx.comparisonprops)) {
      errors.push(TypeError(&apos;[0017] jsonx.comparisonprops  must be an array or comparisons&apos;));
    } else {
      jsonx.comparisonprops.forEach(c =&gt; {
        if (typeof c !== &apos;object&apos;) {
          errors.push(TypeError(&apos;[0018] jsonx.comparisonprops  must be an array or comparisons objects&apos;));
        } else if(typeof c.left===&apos;undefined&apos;) {
          errors.push(TypeError(&apos;[0019] jsonx.comparisonprops  must be have a left comparison value&apos;));
        }
      });
    }
  }
  if (typeof jsonx.passprops !== &apos;undefined&apos; &amp;&amp; typeof jsonx.passprops !== &apos;boolean&apos;) {
    errors.push(TypeError(&apos;[0020] jsonx.passprops  must be boolean&apos;));
  }
  const invalidKeys = Object.keys(jsonx).filter(key =&gt; validKeys.indexOf(key) === -1);
  if (errors.length) {
    if (returnAllErrors) return errors;
    throw errors[ 0 ];
  }
  return invalidKeys.length
    ? `Warning: Invalid Keys [${invalidKeys.join()}]`
    : true;
}

/**
 * validates simple JSONX Syntax {[component]:{props,children}}
 * @param {Object} simpleJSONX - Any valid simple JSONX Syntax
 * @return {Boolean} returns true if simpleJSONX is valid
 */
export function validSimpleJSONXSyntax(simpleJSONX = {}) {
  if (Object.keys(simpleJSONX).length !== 1 &amp;&amp; !simpleJSONX.component) {
    return false;
  } else {
    const componentName = Object.keys(simpleJSONX)[ 0 ];
    return (Object.keys(simpleJSONX).length === 1  &amp;&amp; !simpleJSONX[componentName].component &amp;&amp; typeof simpleJSONX[componentName]===&apos;object&apos;)
      ? true
      : false; 
  }
}

/**
 * Transforms SimpleJSONX to Valid JSONX JSON {[component]:{props,children}} =&gt; {component,props,children}
 * @param {Object} simpleJSONX JSON Object 
 * @return {Object} - returns a valid JSONX JSON Object from a simple JSONX JSON Object
 */
export function simpleJSONXSyntax(simpleJSONX = {}) {
  const component = Object.keys(simpleJSONX)[ 0 ];
  try {
    return Object.assign({},
      {
        component,
      },
      simpleJSONX[ component ], {
        children: (simpleJSONX[ component ].children &amp;&amp; Array.isArray(simpleJSONX[ component ].children))
          ? simpleJSONX[ component ].children
            .map(simpleJSONXSyntax)
          : simpleJSONX[ component ].children,
      });
  } catch (e) {
    throw SyntaxError(&apos;Invalid Simple JSONX Syntax&apos;, e);
  }   
}

/**
 * Transforms Valid JSONX JSON to SimpleJSONX  {component,props,children} =&gt; {[component]:{props,children}}
 * @param {Object} jsonx Valid JSONX JSON object 
 * @return {Object} - returns a simple JSONX JSON Object from a valid JSONX JSON Object 
 */
export function getSimplifiedJSONX(jsonx = {}) {
  try {
    if (!jsonx.component) return jsonx; //already simple
    const componentName = jsonx.component;
    jsonx.children = (Array.isArray(jsonx.children))
      ? jsonx.children
        .filter(child =&gt; child)//remove empty children
        .map(getSimplifiedJSONX) 
      : jsonx.children;
    delete jsonx.component;
    return {
      [ componentName ]: jsonx,
    };
  } catch (e) {
    throw e;
  }
}</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>


</body></html>